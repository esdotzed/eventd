{% extends "base.html" %}

{% block title %}Event Form{% endblock %}

{% block script %}
  <script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBJn4dI5sR-aB5YPbDie0exiEwVzo1dOrE&sensor=false">
  </script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript">
    function searchLocation() {
      var address = $("#id_place_text").val();
      var geocoder = new google.maps.Geocoder();
      geocoder.geocode({address: address}, function(results, status) {
        var loc = results[0].geometry.location;
        $("#id_place_longitude").val(loc.lng());
        $("#id_place_latitude").val(loc.lat());
        $("#event_form").submit();
      });
    }
  </script>
{% endblock %}

{% block content %}
  <form id="event_form" enctype="multipart/form-data" action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="button" onclick="searchLocation()" value="Submit">
  </form>
{% endblock %}

